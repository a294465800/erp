"use strict";$(document).ready(function(){function e(){var e=$(this).val(),i=$(this).parents(".win-item").find(".ho_span");e?i.text(e):i.text("单位")}function i(e){return function(){var i=$(this).parents(e);i.fadeOut(300,"swing",function(){i.remove()})}}function n(e,i,n){return function(){var l,a=0,d=!0,t=!1,s=void 0;try{for(var c,r=e[Symbol.iterator]();!(d=(c=r.next()).done);d=!0){var v=c.value;a+=parseFloat(v.val()||0)}}catch(e){t=!0,s=e}finally{try{!d&&r.return&&r.return()}finally{if(t)throw s}}i.val(a),n.text(a.toLocaleString("en-US")+" ￥"),l=0,l+=(parseFloat($("#projectMainFinalMoney").val())||0)+(parseFloat($("#projectDivideFinalMoney").val())||0),$("#projectTotalFinalMoneyShow").text(l.toLocaleString("en-US")+" ￥")}}_helper.setActiveNav("#navProject",".list"),laydate.render({elem:"#creatDate"}),laydate.render({elem:"#finishDate"});var l={data:_database.read("projects")};console.log(l);var a=$("#winBid");$(".win-company").on("blur",e),$("#addNewBid").on("click",function(){var i=$('<div class="win-item"></div>');i.html('\n        <div class="inline fields">\n          <div class="eight wide field fields">\n            <label class="five wide field">单位名称</label>\n            <input name="winBid_name" type="text" placeholder="请输入单位名称" class="win-company">\n          </div>\n          <div class="eight wide field fields">\n            <label class="five wide field">金额</label>\n            <div class="ui right labeled input">\n              <input name="total_price" type="number" placeholder="请输入金额">\n              <div class="ui basic label">￥</div>\n            </div>\n          </div>\n        </div>\n        <div class="inline fields">\n          <div class="eight wide field fields">\n            <label class="five wide field">备注</label>\n            <textarea name="project_remark" rows="2" placeholder="请输入备注"></textarea>\n          </div>\n          <div class="eight wide field fields relative">\n            <div class="win-remove-btn ui button red">\n              <i class="icon remove"></i>\n              <span>删除该项</span>\n            </div>\n          </div>\n        </div>\n        <h4 class="ui horizontal divider header">\n          <i class="icon travel"></i>\n          <span class="ho_span">单位</span>\n        </h4>'),i.find(".win-company").on("blur",e),i.css("opacity",0),i.insertBefore($(this).parent()),i.animate({opacity:1},500)}),a.on("click",".win-remove-btn",i(".win-item"));var d=$("#divideBid");$("#addNewDivideBid").on("click",function(){var i=$('<div class="win-item"></div>');i.html('\n        <div class="inline fields">\n          <div class="eight wide field fields">\n            <label class="five wide field">发包单位</label>\n            <input name="divide_name" type="text" placeholder="请输入发包单位" class="win-company">\n          </div>\n          <div class="eight wide field fields">\n            <label class="five wide field">分包金额</label>\n            <div class="ui right labeled input">\n              <input name="divide_price" type="number" placeholder="请输入分包金额">\n              <div class="ui basic label">￥</div>\n            </div>\n          </div>\n        </div>\n        <div class="inline fields">\n          <div class="eight wide field fields">\n            <label class="five wide field">备注</label>\n            <textarea name="divide_remark" rows="2" placeholder="请输入备注"></textarea>\n          </div>\n          <div class="eight wide field fields relative">\n            <div class="win-remove-btn ui button red">\n              <i class="icon remove"></i>\n              <span>删除该项</span>\n            </div>\n          </div>\n        </div>\n        <h4 class="ui horizontal divider header">\n          <i class="icon travel"></i>\n          <span class="ho_span">单位</span>\n        </h4>'),i.find(".win-company").on("blur",e),i.css("opacity",0),i.insertBefore($(this).parent()),i.animate({opacity:1},500)}),d.on("click",".win-remove-btn",i(".win-item"));var t=$("#detailItem");$("#addBidNewItem").on("click",function(){var e=$('<div class="field detail-item"></div>');e.html('\n        <div class="three fields">\n          <div class="field">\n            <label>内容名称</label>\n            <input class="project_item_name" type="text" name="project_item" placeholder="请输入内容名称">\n          </div>\n          <div class="field">\n            <label>税率</label>\n            <div class="ui right labeled input">\n              <input type="number" name="project_item_tax" placeholder="税率">\n              <div class="ui basic label">%</div>\n            </div>\n          </div>\n          <div class="field">\n            <label>金额</label>\n            <div class="ui right labeled input">\n              <input type="number" name="project_item_money" placeholder="金额">\n              <div class="ui basic label">￥</div>\n            </div>\n          </div>\n        </div>\n        <div class="two fields">\n          <div class="field">\n            <label>备注</label>\n            <textarea name="divide_remark" rows="2" placeholder="请输入备注"></textarea>\n          </div>\n          <div class="field relative">\n            <label class="invisible">按钮</label>\n            <div class=" ui button red project-item-del">\n              <i class="icon remove"></i>\n              <span>删除该项</span>\n            </div>\n          </div>\n        </div>'),e.css("opacity",0),e.insertBefore($(this).parent()),e.animate({opacity:1},500)}),$("#addBidBackNewItem").on("click",function(){var e=$('<div class="field detail-item"></div>');e.html('\n        <div class="three fields">\n          <div class="field">\n            <label>内容名称</label>\n            <input class="project_item_name" type="text" name="project_item" placeholder="请输入内容名称">\n          </div>\n          <div class="field">\n            <label>税率</label>\n            <div class="ui right labeled input">\n              <input type="number" name="project_item_tax" placeholder="税率">\n              <div class="ui basic label">%</div>\n            </div>\n          </div>\n          <div class="field">\n            <label>金额</label>\n            <div class="ui right labeled input">\n              <input type="number" name="project_item_money" placeholder="金额">\n              <div class="ui basic label">￥</div>\n            </div>\n          </div>\n        </div>\n        <div class="two fields">\n          <div class="field">\n            <label>备注</label>\n            <textarea name="divide_remark" rows="2" placeholder="请输入备注"></textarea>\n          </div>\n          <div class="field relative">\n            <label class="invisible">按钮</label>\n            <div class=" ui button red project-item-del">\n              <i class="icon remove"></i>\n              <span>删除该项</span>\n            </div>\n          </div>\n        </div>'),e.css("opacity",0),e.insertBefore($(this).parent()),e.animate({opacity:1},500)}),t.on("click",".project-item-del",i(".detail-item"));var s=$("#projectMainMoney"),c=$("#projectMainExtraMoney"),r=$("#projectMainFinalMoney");s.on("blur",n([s,c],r,$("#projectMainFinalMoneyShow"))),c.on("blur",n([s,c],r,$("#projectMainFinalMoneyShow"))),$("#addBidDivideNewItem").on("click",function(){var e=$('<div class="field detail-item"></div>');e.html('\n        <div class="three fields">\n          <div class="field">\n            <label>内容名称</label>\n            <input class="project_sub_item_name" type="text" name="project_item" placeholder="请输入内容名称">\n          </div>\n          <div class="field">\n            <label>税率</label>\n            <div class="ui right labeled input">\n              <input type="number" name="project_sub_item_tax" placeholder="税率">\n              <div class="ui basic label">%</div>\n            </div>\n          </div>\n          <div class="field">\n            <label>金额</label>\n            <div class="ui right labeled input">\n              <input type="number" name="project_sub_item_money" placeholder="金额">\n              <div class="ui basic label">￥</div>\n            </div>\n          </div>\n        </div>\n        <div class="two fields">\n          <div class="field">\n            <label>备注</label>\n            <textarea name="divide_remark" rows="2" placeholder="请输入备注"></textarea>\n          </div>\n          <div class="field relative">\n            <label class="invisible">按钮</label>\n            <div class=" ui button red project-item-del">\n              <i class="icon remove"></i>\n              <span>删除该项</span>\n            </div>\n          </div>\n        </div>'),e.css("opacity",0),e.insertBefore($(this).parent()),e.animate({opacity:1},500)}),$("#addBidDivideBackNewItem").on("click",function(){var e=$('<div class="field detail-item"></div>');e.html('\n        <div class="three fields">\n          <div class="field">\n            <label>内容名称</label>\n            <input class="project_sub_item_name" type="text" name="project_item" placeholder="请输入内容名称">\n          </div>\n          <div class="field">\n            <label>税率</label>\n            <div class="ui right labeled input">\n              <input type="number" name="project_sub_item_tax" placeholder="税率">\n              <div class="ui basic label">%</div>\n            </div>\n          </div>\n          <div class="field">\n            <label>金额</label>\n            <div class="ui right labeled input">\n              <input type="number" name="project_sub_item_money" placeholder="金额">\n              <div class="ui basic label">￥</div>\n            </div>\n          </div>\n        </div>\n        <div class="two fields">\n          <div class="field">\n            <label>备注</label>\n            <textarea name="divide_remark" rows="2" placeholder="请输入备注"></textarea>\n          </div>\n          <div class="field relative">\n            <label class="invisible">按钮</label>\n            <div class=" ui button red project-item-del">\n              <i class="icon remove"></i>\n              <span>删除该项</span>\n            </div>\n          </div>\n        </div>'),e.css("opacity",0),e.insertBefore($(this).parent()),e.animate({opacity:1},500)});var v=$("#projectDivideMoney"),o=$("#projectDivideExtraMoney"),p=$("#projectDivideFinalMoney");v.on("blur",n([v,o],p,$("#projectDivideFinalMoneyShow"))),o.on("blur",n([v,o],p,$("#projectDivideFinalMoneyShow")))});