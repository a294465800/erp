"use strict";$(document).ready(function(){function e(){var e=$(this).val(),i=$(this).parents(".win-item").find(".ho_span");e?i.text(e):i.text("单位")}function i(e){return function(){var i=$(this).parents(e);i.fadeOut(300,"swing",function(){i.remove()})}}function a(e,i,a){return function(){var n,l=0,t=!0,d=!1,s=void 0;try{for(var c,r=e[Symbol.iterator]();!(t=(c=r.next()).done);t=!0){var o=c.value;l+=parseFloat(o.val()||0)}}catch(e){d=!0,s=e}finally{try{!t&&r.return&&r.return()}finally{if(d)throw s}}i.val(l),a.text(l.toLocaleString("en-US")+" ￥"),n=0,n+=(parseFloat($("#projectMainFinalMoney").val())||0)+(parseFloat($("#projectDivideFinalMoney").val())||0),$("#projectTotalFinalMoneyShow").text(n.toLocaleString("en-US")+" ￥")}}function n(){var e=this.attr("name"),i=this.val(),a=/(index)/;if(a.test(e)){var n=this.parents(".data-dom").data("index");e=e.replace(a,n)}t(e,i)}_helper.setActiveNav("#navProject",".list"),laydate.render({elem:"#createDate",done:function(e,i){t("signDate",e)}}),laydate.render({elem:"#completeDate",done:function(e,i){t("completeDate",e)}});var l={data:_database.read("projects")};function t(e,i){_database.setValue("projects",e,i),console.log(l.data)}var d=$("#winBid");$(".win-company").on("blur",e),$("#addNewBid").on("click",function(){var i=$('<div class="win-item" data-id=1 data-name="masterCompany"></div>');i.html('\n        <div class="inline fields">\n          <div class="eight wide field fields">\n            <label class="five wide field">单位名称</label>\n            <input name="masterCompany.name" type="text" placeholder="请输入单位名称" class="win-company">\n          </div>\n          <div class="eight wide field fields">\n            <label class="five wide field">金额</label>\n            <div class="ui right labeled input">\n              <input name="masterCompany.amount" type="number" placeholder="请输入金额">\n              <div class="ui basic label">￥</div>\n            </div>\n          </div>\n        </div>\n        <div class="inline fields">\n          <div class="eight wide field fields">\n            <label class="five wide field">备注</label>\n            <textarea name="masterCompany.remark" rows="2" placeholder="请输入备注"></textarea>\n          </div>\n          <div class="eight wide field fields relative">\n            <div class="win-remove-btn ui button red">\n              <i class="icon remove"></i>\n              <span>删除该项</span>\n            </div>\n          </div>\n        </div>\n        <h4 class="ui horizontal divider header">\n          <i class="icon travel"></i>\n          <span class="ho_span">单位</span>\n        </h4>'),i.find(".win-company").on("blur",e),i.css("opacity",0),i.insertBefore($(this).parent()),i.animate({opacity:1},500)}),d.on("click",".win-remove-btn",i(".win-item"));var s=$("#divideBid");$("#addNewDivideBid").on("click",function(){var i=$('<div class="win-item" data-id=1 data-name="subCompany"></div>');i.html('\n        <div class="inline fields">\n          <div class="eight wide field fields">\n            <label class="five wide field">发包单位</label>\n            <input name="subCompany.name" type="text" placeholder="请输入发包单位" class="win-company">\n          </div>\n          <div class="eight wide field fields">\n            <label class="five wide field">分包金额</label>\n            <div class="ui right labeled input">\n              <input name="subCompany.amount" type="number" placeholder="请输入分包金额">\n              <div class="ui basic label">￥</div>\n            </div>\n          </div>\n        </div>\n        <div class="inline fields">\n          <div class="eight wide field fields">\n            <label class="five wide field">备注</label>\n            <textarea name="subCompany.remark" rows="2" placeholder="请输入备注"></textarea>\n          </div>\n          <div class="eight wide field fields relative">\n            <div class="win-remove-btn ui button red">\n              <i class="icon remove"></i>\n              <span>删除该项</span>\n            </div>\n          </div>\n        </div>\n        <h4 class="ui horizontal divider header">\n          <i class="icon travel"></i>\n          <span class="ho_span">单位</span>\n        </h4>'),i.find(".win-company").on("blur",e),i.css("opacity",0),i.insertBefore($(this).parent()),i.animate({opacity:1},500)}),s.on("click",".win-remove-btn",i(".win-item"));var c=$("#detailItem");$("#addBidNewItem").on("click",function(){var e=$('<div class="field detail-item"  data-id=1 data-name="masterContract.details"></div>');e.html('\n        <div class="three fields">\n          <div class="field">\n            <label>内容名称</label>\n            <input class="masterContract.details.name" type="text" name="project_item" placeholder="请输入内容名称">\n          </div>\n          <div class="field">\n            <label>税率</label>\n            <div class="ui right labeled input">\n              <input type="number" name="masterContract.details.tax" placeholder="税率">\n              <div class="ui basic label">%</div>\n            </div>\n          </div>\n          <div class="field">\n            <label>金额</label>\n            <div class="ui right labeled input">\n              <input type="number" name="masterContract.details.amount" placeholder="金额">\n              <div class="ui basic label">￥</div>\n            </div>\n          </div>\n        </div>\n        <div class="two fields">\n          <div class="field">\n            <label>备注</label>\n            <textarea name="masterContract.details.remark" rows="2" placeholder="请输入备注"></textarea>\n          </div>\n          <div class="field relative">\n            <label class="invisible">按钮</label>\n            <div class=" ui button red project-item-del">\n              <i class="icon remove"></i>\n              <span>删除该项</span>\n            </div>\n          </div>\n        </div>'),e.css("opacity",0),e.insertBefore($(this).parent()),e.animate({opacity:1},500)}),$("#addBidBackNewItem").on("click",function(){var e=$('<div class="field detail-item" data-id=1 data-name="masterContractAppend.details"></div>');e.html('\n        <div class="three fields">\n          <div class="field">\n            <label>内容名称</label>\n            <input class="masterContractAppend.details.name" type="text" name="project_item" placeholder="请输入内容名称">\n          </div>\n          <div class="field">\n            <label>税率</label>\n            <div class="ui right labeled input">\n              <input type="number" name="masterContractAppend.details.tax" placeholder="税率">\n              <div class="ui basic label">%</div>\n            </div>\n          </div>\n          <div class="field">\n            <label>金额</label>\n            <div class="ui right labeled input">\n              <input type="number" name="masterContractAppend.details.amount" placeholder="金额">\n              <div class="ui basic label">￥</div>\n            </div>\n          </div>\n        </div>\n        <div class="two fields">\n          <div class="field">\n            <label>备注</label>\n            <textarea name="masterContractAppend.details.remark" rows="2" placeholder="请输入备注"></textarea>\n          </div>\n          <div class="field relative">\n            <label class="invisible">按钮</label>\n            <div class=" ui button red project-item-del">\n              <i class="icon remove"></i>\n              <span>删除该项</span>\n            </div>\n          </div>\n        </div>'),e.css("opacity",0),e.insertBefore($(this).parent()),e.animate({opacity:1},500)}),c.on("click",".project-item-del",i(".detail-item"));var r=$("#projectMainMoney"),o=$("#projectMainExtraMoney"),v=$("#projectMainFinalMoney");r.on("blur",a([r,o],v,$("#projectMainFinalMoneyShow"))),o.on("blur",a([r,o],v,$("#projectMainFinalMoneyShow"))),$("#addBidDivideNewItem").on("click",function(){var e=$('<div class="field detail-item" data-id=1 data-name="subContract.details"></div>');e.html('\n        <div class="three fields">\n          <div class="field">\n            <label>内容名称</label>\n            <input class="subContract.details.name" type="text" name="project_item" placeholder="请输入内容名称">\n          </div>\n          <div class="field">\n            <label>税率</label>\n            <div class="ui right labeled input">\n              <input type="number" name="subContract.details.tax" placeholder="税率">\n              <div class="ui basic label">%</div>\n            </div>\n          </div>\n          <div class="field">\n            <label>金额</label>\n            <div class="ui right labeled input">\n              <input type="number" name="subContract.details.amount" placeholder="金额">\n              <div class="ui basic label">￥</div>\n            </div>\n          </div>\n        </div>\n        <div class="two fields">\n          <div class="field">\n            <label>备注</label>\n            <textarea name="subContract.details.remark" rows="2" placeholder="请输入备注"></textarea>\n          </div>\n          <div class="field relative">\n            <label class="invisible">按钮</label>\n            <div class=" ui button red project-item-del">\n              <i class="icon remove"></i>\n              <span>删除该项</span>\n            </div>\n          </div>\n        </div>'),e.css("opacity",0),e.insertBefore($(this).parent()),e.animate({opacity:1},500)}),$("#addBidDivideBackNewItem").on("click",function(){var e=$('<div class="field detail-item" data-id=1 data-name="subContractAppend.details"></div>');e.html('\n        <div class="three fields">\n          <div class="field">\n            <label>内容名称</label>\n            <input class="subContractAppend.details.name" type="text" name="project_item" placeholder="请输入内容名称">\n          </div>\n          <div class="field">\n            <label>税率</label>\n            <div class="ui right labeled input">\n              <input type="number" name="subContractAppend.details.tax" placeholder="税率">\n              <div class="ui basic label">%</div>\n            </div>\n          </div>\n          <div class="field">\n            <label>金额</label>\n            <div class="ui right labeled input">\n              <input type="number" name="subContractAppend.details.amount" placeholder="金额">\n              <div class="ui basic label">￥</div>\n            </div>\n          </div>\n        </div>\n        <div class="two fields">\n          <div class="field">\n            <label>备注</label>\n            <textarea name="subContractAppend.details.remark" rows="2" placeholder="请输入备注"></textarea>\n          </div>\n          <div class="field relative">\n            <label class="invisible">按钮</label>\n            <div class=" ui button red project-item-del">\n              <i class="icon remove"></i>\n              <span>删除该项</span>\n            </div>\n          </div>\n        </div>'),e.css("opacity",0),e.insertBefore($(this).parent()),e.animate({opacity:1},500)});var p=$("#projectDivideMoney"),m=$("#projectDivideExtraMoney"),b=$("#projectDivideFinalMoney");p.on("blur",a([p,m],b,$("#projectDivideFinalMoneyShow"))),m.on("blur",a([p,m],b,$("#projectDivideFinalMoneyShow"))),$("input").on("blur",function(){var e=$(this);n.call(e)}),$("textarea").on("blur",function(){var e=$(this);n.call(e)})});